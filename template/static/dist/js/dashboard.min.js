function authenticate(e,t,a){var n=new XMLHttpRequest;n.open("GET","/api/v1/auth/login",!0),n.onreadystatechange=function(){data=JSON.parse(n.responseText),a("success"==data.Result?{authenticated:!0,token:Math.random().toString(36).substring(7)}:{authenticated:!1,errors:data.Messages})},n.send(JSON.stringify({email:e,password:t}))}function validateEmail(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}var Authentication={statics:{willTransitionTo:function(e){var t=e.path;auth.loggedIn()||e.redirect("/login",{},{nextPath:t})}}},Login=React.createClass({displayName:"Login",contextTypes:{router:React.PropTypes.func.isRequired},getInitialState:function(){return{email:"",password:""}},validationEmailState:function(){return""==this.state.email.length?"error":validateEmail(this.state.email)!==!0?"error":"success"},validationPasswordState:function(){return this.state.password.length>8?"success":this.state.password.length>0?"error":void 0},handleChange:function(){this.setState({error:this.state.error,email:this.refs.email.getValue(),password:this.refs.password.getValue()})},handleSubmit:function(e){e.preventDefault();var t=this.context,a=t.router,n=a.getCurrentQuery().nextPath;auth.login(this.state.email,this.state.password,function(e){return e?void a.replaceWith(n?n:"/"):this.setState({error:!0})}.bind(this))},render:function(){var e=(this.state.error?React.createElement("p",null,"Bad Login Information"):"",ReactBootstrap.Input),t=ReactBootstrap.Button;return React.createElement("div",{className:"col-md-3 col-md-offset-3"},React.createElement("h1",null,"Sign In"),React.createElement("form",{onSubmit:this.handleSubmit,className:"text-left"},React.createElement(e,{label:"Email Address",type:"email",ref:"email",placeholder:"Enter email",value:this.state.email,autoFocus:!0,hasFeedback:!0,bsStyle:this.validationEmailState(),onChange:this.handleChange}),React.createElement(e,{label:"Password",type:"password",ref:"password",placeholder:"Password",value:this.state.password,hasFeedback:!0,bsStyle:this.validationPasswordState(),onChange:this.handleChange}),React.createElement(t,{type:"submit"},"Sign In")))}}),Logout=React.createClass({displayName:"Logout",componentDidMount:function(){auth.logout()},render:function(){return React.createElement("div",{className:"col-md-3 col-md-offset-3"},React.createElement("h1",null,"Signed Out"),React.createElement("p",null,"You are now signed out!"))}}),auth={login:function(e,t,a){return a=arguments[arguments.length-1],localStorage.token?(a&&a(!0),void this.onChange(!0)):void(void 0!==e&&void 0!=t&&authenticate(e,t,function(e){e.authenticated?(localStorage.token=e.token,a&&a(!0),this.onChange(!0)):(a&&a(!1),this.onChange(!1))}.bind(this)))},getToken:function(){return localStorage.token},logout:function(e){delete localStorage.token,e&&e(),this.onChange(!1)},loggedIn:function(){return!!localStorage.token},onChange:function(){}},DashboardHolder=React.createClass({displayName:"DashboardHolder",mixins:[Authentication],render:function(){return React.createElement("div",{className:"container-fluid"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-3 col-md-2 sidebar"},React.createElement("ul",{className:"nav nav-sidebar"},React.createElement("li",null,React.createElement(Link,{to:"d_overview"},"Overview")),React.createElement("li",null,React.createElement(Link,{to:"d_servers"},"Servers")),React.createElement("li",null,React.createElement(Link,{to:"d_apps"},"Applications")))),React.createElement("div",{className:"col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main"},React.createElement(RouteHandler,null))))}}),DashboardOverview=React.createClass({displayName:"DashboardOverview",render:function(){return React.createElement("div",null,"Dashboard Overview...")}}),DashboardServers=React.createClass({displayName:"DashboardServers",render:function(){return React.createElement("div",null,"Dashboard Servers...")}}),DashboardApps=React.createClass({displayName:"DashboardApps",render:function(){return React.createElement("div",null,"Dashboard Apps...")}}),ProfileHolder=React.createClass({displayName:"ProfileHolder",mixins:[Authentication],render:function(){return React.createElement("div",{className:"container-fluid"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-3 col-md-2 sidebar"},React.createElement("h1",null,"Profile"),React.createElement("ul",{className:"nav nav-sidebar"},React.createElement("li",null,React.createElement(Link,{to:"p_password"},"Password")))),React.createElement("div",{className:"col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main"},React.createElement(RouteHandler,null))))}}),ProfilePassword=React.createClass({displayName:"ProfilePassword",render:function(){return React.createElement("div",null,"Reset Password...")}}),SettingsHolder=React.createClass({displayName:"SettingsHolder",mixins:[Authentication],render:function(){return React.createElement("div",{className:"container-fluid"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-3 col-md-2 sidebar"},React.createElement("h1",null,"Settings"),React.createElement("ul",{className:"nav nav-sidebar"},React.createElement("li",null,React.createElement(Link,{to:"s_commands"},"Commands")),React.createElement("li",null,React.createElement(Link,{to:"s_contacts"},"Contacts")),React.createElement("li",null,React.createElement(Link,{to:"s_servers"},"Servers")),React.createElement("li",null,React.createElement(Link,{to:"s_timeperiods"},"Time Periods")))),React.createElement("div",{className:"col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main"},React.createElement(RouteHandler,null))))}}),SettingsCommands=React.createClass({displayName:"SettingsCommands",render:function(){return React.createElement("div",null,"Settings Commands...")}}),SettingsContacts=React.createClass({displayName:"SettingsContacts",render:function(){return React.createElement("div",null,"Settings Contacts...")}}),SettingsServers=React.createClass({displayName:"SettingsServers",render:function(){return React.createElement("div",null,"Settings Servers...")}}),SettingsTimePeriods=React.createClass({displayName:"SettingsTimePeriods",render:function(){return React.createElement("div",null,"Settings Time Periods...")}}),Router=ReactRouter,Route=Router.Route,Link=Router.Link,RouteHandler=Router.RouteHandler,DefaultRoute=Router.DefaultRoute,Redirect=Router.Redirect,NotFoundRoute=Router.NotFoundRoute,App=React.createClass({displayName:"App",getInitialState:function(){return{loggedIn:auth.loggedIn()}},setStateOnAuth:function(e){this.setState({loggedIn:e})},componentWillMount:function(){auth.onChange=this.setStateOnAuth,auth.login()},render:function(){var e=ReactBootstrap.Navbar,t=ReactBootstrap.Nav,a=ReactBootstrap.NavItem;return accessLink=this.state.loggedIn?React.createElement(a,{href:"#/logout"},"Sign Out"):React.createElement(a,{href:"#/login"},"Sign In"),React.createElement("div",null,React.createElement(e,{brand:"ZenPager",fixedTop:!0,fluid:!0,inverse:!0},React.createElement(t,{right:!0},React.createElement(a,{href:"#/dashboard"},"Dashboard"),React.createElement(a,{href:"#/settings"},"Settings"),React.createElement(a,{href:"#/profile"},"Profile"),accessLink)),React.createElement(RouteHandler,null))}}),Messages=React.createClass({displayName:"Messages",getInitialState:function(){return{visible:!0}},handleDismiss:function(){this.setState({visible:!1})},render:function(){if(this.state.visible){var e=ReactBootstrap.Alert;return React.createElement(e,{bsStyle:this.props.type,onDismiss:this.handleDismiss,dismissAfter:2e3},this.props.message)}}}),NotFound=React.createClass({displayName:"NotFound",render:function(){return React.createElement("div",{className:"container-fluid"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main"},React.createElement("h1",null,"404 Not Found"))))}}),routes=React.createElement(Route,{name:"app",path:"/",handler:App},React.createElement(NotFoundRoute,{handler:NotFound}),React.createElement(Route,{name:"login",handler:Login}),React.createElement(Route,{name:"logout",handler:Logout}),React.createElement(Route,{name:"dashboard",handler:DashboardHolder},React.createElement(Route,{name:"d_overview",path:"overview",handler:DashboardOverview}),React.createElement(Route,{name:"d_servers",path:"servers",handler:DashboardServers}),React.createElement(Route,{name:"d_apps",path:"apps",handler:DashboardApps}),React.createElement(Redirect,{from:"/dashboard",to:"d_overview"})),React.createElement(Route,{name:"settings",handler:SettingsHolder},React.createElement(Route,{name:"s_commands",path:"commands",handler:SettingsCommands}),React.createElement(Route,{name:"s_contacts",path:"contacts",handler:SettingsContacts}),React.createElement(Route,{name:"s_servers",path:"servers",handler:SettingsServers}),React.createElement(Route,{name:"s_timeperiods",path:"timeperiods",handler:SettingsTimePeriods}),React.createElement(Redirect,{from:"/settings",to:"s_commands"})),React.createElement(Route,{name:"profile",handler:ProfileHolder},React.createElement(Route,{name:"p_password",path:"password",handler:ProfilePassword}),React.createElement(Redirect,{from:"/profile",to:"p_password"})),React.createElement(Redirect,{from:"/",to:"d_overview"}));Router.run(routes,function(e){React.render(React.createElement(e,null),document.body)});
//# sourceMappingURL=dashboard.min.js.map