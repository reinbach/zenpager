function authenticate(e,t,a){var s=new XMLHttpRequest;s.open("POST","/api/v1/auth/login",!0),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=function(){4===s.readyState&&(data=JSON.parse(s.responseText),a("success"===data.Result?{authenticated:!0,token:s.getResponseHeader("X-Access-Token"),id:data.ID}:{authenticated:!1,errors:data.Messages}))},s.send(JSON.stringify({email:e,password:t}))}function logout(e){var t=new XMLHttpRequest;t.open("GET","/api/v1/auth/logout",!0),t.setRequestHeader("Content-Type","application/json"),t.setRequestHeader("X-Access-Token",e),t.onreadystatechange=function(){4===t.readyState&&(data=JSON.parse(t.responseText),console.log("success"===data.Result?"successfully logged out":"failed to logout!"))},t.send()}function validateEmail(e){var t=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}function passwordValid(e){return e.length>=8?!0:!1}var request={get:function(e,t){var a=new XMLHttpRequest;a.open("GET",e,!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("X-Access-Token",auth.getToken()),a.onreadystatechange=function(){4===a.readyState&&(401==a.status?auth.logout():(data=JSON.parse(a.responseText),t&&t(data)))},a.send()},patch:function(e,t,a){var s=new XMLHttpRequest;s.open("PATCH",e,!0),s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("X-Access-Token",auth.getToken()),s.onreadystatechange=function(){4===s.readyState&&(401==s.status?auth.logout():(rdata=JSON.parse(s.responseText),a&&a(rdata)))},s.send(JSON.stringify(t))}},AuthenticationMixin={statics:{willTransitionTo:function(e){var t=e.path;auth.loggedIn()||e.redirect("/login",{},{nextPath:t})}}},Login=React.createClass({displayName:"Login",contextTypes:{router:React.PropTypes.func.isRequired},getInitialState:function(){return{email:"",password:""}},getDefaultProps:function(){return{messages:[]}},validationEmailState:function(){return this.state.email.length>0?validateEmail(this.state.email)===!0?"success":"error":void 0},validationPasswordState:function(){return this.state.password.length>0?passwordValid(this.state.password)?"success":"error":void 0},handleChange:function(){this.setState({email:this.refs.email.getValue(),password:this.refs.password.getValue()})},handleSubmit:function(e){e.preventDefault();var t=this.context,a=t.router,s=a.getCurrentQuery().nextPath;auth.login(this.state.email,this.state.password,function(){a.replaceWith(s?s:"/")}.bind(this))},render:function(){var e=[];return this.props.messages.forEach(function(t){e.push(React.createElement(Messages,{type:t.Type,message:t.Content}))}),React.createElement("div",{className:"container-fluid"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-3 col-md-offset-5 main"},e,React.createElement("h1",{className:"page-header"},"Sign In"),React.createElement("form",{onSubmit:this.handleSubmit,className:"text-left"},React.createElement(Input,{label:"Email Address",type:"email",ref:"email",placeholder:"Enter email",value:this.state.email,autoFocus:!0,hasFeedback:!0,bsStyle:this.validationEmailState(),onChange:this.handleChange}),React.createElement(Input,{label:"Password",type:"password",ref:"password",placeholder:"Password",value:this.state.password,hasFeedback:!0,bsStyle:this.validationPasswordState(),onChange:this.handleChange}),React.createElement(Button,{type:"submit",bsStyle:"success"},"Sign In")))))}}),Logout=React.createClass({displayName:"Logout",componentDidMount:function(){auth.logout()},render:function(){return React.createElement("div",{className:"col-md-3 col-md-offset-3"},React.createElement("h1",null,"Signed Out"),React.createElement("p",null,"You are now signed out!"))}}),auth={login:function(e,t,a){return a=arguments[arguments.length-1],localStorage.token?(a&&a(!0),void this.onChange(!0)):void 0===e||void 0==t?void(a&&a(!1)):void authenticate(e,t,function(e){e.authenticated?(localStorage.token=e.token,localStorage.id=e.id,a&&a(!0),this.onChange(!0,e.errors)):(a&&a(!1),this.onChange(!1,e.errors))}.bind(this))},getToken:function(){return localStorage.token},logout:function(e){logout(localStorage.token),delete localStorage.token,e&&e(!1),this.onChange(!1)},loggedIn:function(){return!!localStorage.token},onChange:function(){}},DashboardHolder=React.createClass({displayName:"DashboardHolder",mixins:[AuthenticationMixin],getInitialState:function(){return{messages:[]}},render:function(){var e=[];return this.state.messages.forEach(function(t){e.push(React.createElement(Messages,{type:"error",message:t}))}),React.createElement("div",{className:"container-fluid"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-3 col-md-2 sidebar"},React.createElement("ul",{className:"nav nav-sidebar"},React.createElement("li",null,React.createElement(Link,{to:"d_overview"},"Overview")),React.createElement("li",null,React.createElement(Link,{to:"d_servers"},"Servers")),React.createElement("li",null,React.createElement(Link,{to:"d_apps"},"Applications")))),React.createElement("div",{className:"col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main"},e,React.createElement(RouteHandler,null))))}}),DashboardOverview=React.createClass({displayName:"DashboardOverview",mixins:[AuthenticationMixin],render:function(){return React.createElement("div",null,"Dashboard Overview...")}}),DashboardServers=React.createClass({displayName:"DashboardServers",mixins:[AuthenticationMixin],render:function(){return React.createElement("div",null,"Dashboard Servers...")}}),DashboardApps=React.createClass({displayName:"DashboardApps",mixins:[AuthenticationMixin],render:function(){return React.createElement("div",null,"Dashboard Apps...")}}),ProfileHolder=React.createClass({displayName:"ProfileHolder",mixins:[AuthenticationMixin],render:function(){return React.createElement("div",{className:"container-fluid"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-3 col-md-2 sidebar"},React.createElement("h1",null,"Profile"),React.createElement("ul",{className:"nav nav-sidebar"},React.createElement("li",null,React.createElement(Link,{to:"p_password"},"Password")))),React.createElement("div",{className:"col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main"},React.createElement(RouteHandler,null))))}}),ProfilePassword=React.createClass({displayName:"ProfilePassword",mixins:[AuthenticationMixin],getInitialState:function(){return{password:"",password_confirm:"",messages:[]}},validationPasswordState:function(){return this.state.password.length>0?passwordValid(this.state.password)?"success":"error":void 0},validationPasswordConfirmState:function(){return this.state.password_confirm.length>0||this.state.password.length>0?this.state.password_confirm===this.state.password?"success":"error":void 0},handleChange:function(){this.setState({password:this.refs.password.getValue(),password_confirm:this.refs.password_confirm.getValue()})},handleSubmit:function(e){return e.preventDefault(),this.state.password.length<1?void this.setState({messages:[{Type:"danger",Content:"Password is required."}]}):"success"!==this.validationPasswordState()||"success"!==this.validationPasswordConfirmState()?void this.setState({messages:[{Type:"danger",Content:"Fix errors"}]}):void user.updatePassword(this.state.password,function(e,t){e===!0?this.setState({messages:t,password:"",password_confirm:""}):(this.setState({messages:t,password:this.state.password,password_confirm:this.state.password_confirm}),console.log(this.state.messages))}.bind(this))},render:function(){var e=[];return this.state.messages.forEach(function(t){e.push(React.createElement(Messages,{type:t.Type,message:t.Content}))}),React.createElement("div",{className:"col-md-3"},React.createElement("form",{onSubmit:this.handleSubmit,className:"text-left"},React.createElement("h1",{className:"page-header"},"Reset Password"),e,React.createElement(Input,{label:"New Password",type:"password",ref:"password",placeholder:"New password",value:this.state.password,autoFocus:!0,hasFeedback:!0,bsStyle:this.validationPasswordState(),onChange:this.handleChange}),React.createElement(Input,{label:"Confirm Password",type:"password",ref:"password_confirm",placeholder:"Confirm Password",value:this.state.password_confirm,hasFeedback:!0,bsStyle:this.validationPasswordConfirmState(),onChange:this.handleChange}),React.createElement(Button,{type:"submit",bsStyle:"success"},"Update Password")))}}),user={updatePassword:function(e,t){return callback=t,localStorage.id?e.length<1?void(callback&&callback(!1,["Password is required."])):void request.patch("/api/v1/user/"+localStorage.id,{password:e},this.processPatch):void(callback&&callback(!1))},processPatch:function(e){"success"==e.Result?callback&&callback(!0,[{Type:"success",Content:"Successfully updated password."}]):callback&&callback(!1,e.errors)}},SettingsHolder=React.createClass({displayName:"SettingsHolder",mixins:[AuthenticationMixin],render:function(){return React.createElement("div",{className:"container-fluid"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-3 col-md-2 sidebar"},React.createElement("h1",null,"Settings"),React.createElement("ul",{className:"nav nav-sidebar"},React.createElement("li",null,React.createElement(Link,{to:"s_commands"},"Commands")),React.createElement("li",null,React.createElement(Link,{to:"s_contacts_list",className:"contacts-link"},"Contacts")),React.createElement("li",null,React.createElement(Link,{to:"s_servers"},"Servers")),React.createElement("li",null,React.createElement(Link,{to:"s_timeperiods"},"Time Periods")))),React.createElement("div",{className:"col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main"},React.createElement(RouteHandler,null))))}}),SettingsCommands=React.createClass({displayName:"SettingsCommands",mixins:[AuthenticationMixin],render:function(){return React.createElement("div",null,"Settings Commands...")}}),SettingsServers=React.createClass({displayName:"SettingsServers",mixins:[AuthenticationMixin],render:function(){return React.createElement("div",null,"Settings Servers...")}}),SettingsTimePeriods=React.createClass({displayName:"SettingsTimePeriods",mixins:[AuthenticationMixin],render:function(){return React.createElement("div",null,"Settings Time Periods...")}}),contacts={init:function(){$(".contacts-link").addClass("active")},close:function(){$(".contacts-link").removeClass("active")},get:function(e){callback=e,request.get("/api/v1/contacts/",this.processGet)},processGet:function(e){callback("success"===e.Result?{data:e}:{data:[],errors:e.Messages})}},SettingsContactsMixin={componentDidMount:function(){contacts.init()},componentWillUnmount:function(){contacts.close()}},SettingsContactsHolder=React.createClass({displayName:"SettingsContactsHolder",mixins:[AuthenticationMixin,SettingsContactsMixin],render:function(){return React.createElement("div",null,React.createElement("h1",{className:"page-header"},"Contacts"),React.createElement(RouteHandler,null))}}),SettingsContacts=React.createClass({displayName:"SettingsContacts",mixins:[AuthenticationMixin,SettingsContactsMixin],propTypes:{contacts:React.PropTypes.array,messages:React.PropTypes.array},getDefaultProps:function(){contacts.get(function(e,t){return{contacts:e,messages:t}})},render:function(){return React.createElement("div",null,React.createElement(Link,{to:"s_contacts_add"},React.createElement(Button,{bsStyle:"primary"},"Add Contact")),React.createElement("p",null,"Settings Contacts... we need more"))}}),SettingsContactsAdd=React.createClass({displayName:"SettingsContactsAdd",mixins:[AuthenticationMixin,SettingsContactsMixin],render:function(){return React.createElement("div",null,"add the contacts here!!!")}}),Router=ReactRouter,Route=Router.Route,Link=Router.Link,RouteHandler=Router.RouteHandler,DefaultRoute=Router.DefaultRoute,Redirect=Router.Redirect,NotFoundRoute=Router.NotFoundRoute,Input=ReactBootstrap.Input,Button=ReactBootstrap.Button,App=React.createClass({displayName:"App",getInitialState:function(){return{loggedIn:auth.loggedIn(),messages:[]}},setStateOnAuth:function(e,t){this.setState({loggedIn:e,messages:t})},componentWillMount:function(){auth.onChange=this.setStateOnAuth,auth.login()},render:function(){var e=ReactBootstrap.Navbar,t=ReactBootstrap.Nav,a=ReactBootstrap.NavItem;return accessLink=this.state.loggedIn?React.createElement(a,{href:"#/logout"},"Sign Out"):React.createElement(a,{href:"#/login"},"Sign In"),React.createElement("div",null,React.createElement(e,{brand:"ZenPager",fixedTop:!0,fluid:!0,inverse:!0},React.createElement(t,{right:!0},React.createElement(a,{href:"#/dashboard"},"Dashboard"),React.createElement(a,{href:"#/settings"},"Settings"),React.createElement(a,{href:"#/profile"},"Profile"),accessLink)),React.createElement(RouteHandler,{messages:this.state.messages}))}}),Messages=React.createClass({displayName:"Messages",getInitialState:function(){return{visible:!0}},handleDismiss:function(){this.setState({visible:!1})},render:function(){if(this.state.visible){var e=ReactBootstrap.Alert;return React.createElement(e,{bsStyle:this.props.type,onDismiss:this.handleDismiss},this.props.message)}return React.createElement("div",null)}}),NotFound=React.createClass({displayName:"NotFound",render:function(){return React.createElement("div",{className:"container-fluid"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main"},React.createElement("h1",null,"404 Not Found"))))}}),routes=React.createElement(Route,{name:"app",path:"/",handler:App},React.createElement(NotFoundRoute,{handler:NotFound}),React.createElement(Route,{name:"login",handler:Login}),React.createElement(Route,{name:"logout",handler:Logout}),React.createElement(Route,{name:"dashboard",handler:DashboardHolder},React.createElement(Route,{name:"d_overview",path:"overview",handler:DashboardOverview}),React.createElement(Route,{name:"d_servers",path:"servers",handler:DashboardServers}),React.createElement(Route,{name:"d_apps",path:"apps",handler:DashboardApps}),React.createElement(Redirect,{from:"/dashboard",to:"d_overview"})),React.createElement(Route,{name:"settings",handler:SettingsHolder},React.createElement(Route,{name:"s_commands",path:"commands",handler:SettingsCommands}),React.createElement(Route,{name:"contacts",handler:SettingsContactsHolder},React.createElement(Route,{name:"s_contacts_list",path:"list",handler:SettingsContacts}),React.createElement(Route,{name:"s_contacts_add",path:"add",handler:SettingsContactsAdd}),React.createElement(Redirect,{from:"/contacts",to:"s_contacts_list"})),React.createElement(Route,{name:"s_servers",path:"servers",handler:SettingsServers}),React.createElement(Route,{name:"s_timeperiods",path:"timeperiods",handler:SettingsTimePeriods}),React.createElement(Redirect,{from:"/settings",to:"s_commands"})),React.createElement(Route,{name:"profile",handler:ProfileHolder},React.createElement(Route,{name:"p_password",path:"password",handler:ProfilePassword}),React.createElement(Redirect,{from:"/profile",to:"p_password"})),React.createElement(Redirect,{from:"/",to:"d_overview"}));Router.run(routes,function(e){React.render(React.createElement(e,null),document.body)});
//# sourceMappingURL=dashboard.min.js.map